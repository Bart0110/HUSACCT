package husacct.control.presentation.menubar;


import husacct.control.task.IStateChangeListener;
import husacct.control.task.StateController;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JMenu;
import javax.swing.JMenuItem;

@SuppressWarnings("serial")
public class ExportMenu extends JMenu{
	private StateController controller;
	private JMenuItem exportViolationReportItem;
	private JMenuItem exportLogicalArchitectureItem;
	private JMenuItem exportPhysicalArchitectureItem;
	private int currentState;
	
	public ExportMenu(StateController stateController){
		super("Export");
		
		this.controller = stateController;
		currentState = controller.getState();
		
		
		exportLogicalArchitectureItem = new JMenuItem("Logical architecture");
		this.add(exportLogicalArchitectureItem);
		exportLogicalArchitectureItem.addActionListener(new ActionListener(){
			public void actionPerformed(ActionEvent e){
				// TODO: logical architecture
			}
		});

<<<<<<< HEAD
				
		exportViolationReportItem = new JMenuItem("Violation report");

		exportPhysicalArchitectureItem = new JMenuItem("Physical architecture");
=======
		JMenuItem exportPhysicalArchitectureItem = new JMenuItem("Physical architecture");
>>>>>>> b41072a8bc2d1ef523f3d97d4a6bdb2e4c212598
		this.add(exportPhysicalArchitectureItem);
		exportPhysicalArchitectureItem.addActionListener(new ActionListener(){
			public void actionPerformed(ActionEvent e){
				// TODO: logical architecture
			}
		});
		
<<<<<<< HEAD
		exportViolationReportItem = new JMenuItem("Violation report");

=======
		JMenuItem exportViolationReportItem = new JMenuItem("Violation report");
>>>>>>> b41072a8bc2d1ef523f3d97d4a6bdb2e4c212598
		this.add(exportViolationReportItem);
		
		exportViolationReportItem.addActionListener(new ActionListener(){
			public void actionPerformed(ActionEvent e){
				// TODO: Violation report
			}
		});
		
		//disable buttons on start
		exportViolationReportItem.setEnabled(false);
		exportLogicalArchitectureItem.setEnabled(false);
		exportPhysicalArchitectureItem.setEnabled(false);
		
		controller.addStateChangeListener(new IStateChangeListener() {

			@Override
			public void changeState(int state) {
				currentState = controller.getState();
				
				if(currentState == 0){
					exportViolationReportItem.setEnabled(false);
					exportLogicalArchitectureItem.setEnabled(false);
					exportPhysicalArchitectureItem.setEnabled(false);
				}else if(currentState == 1){
					exportViolationReportItem.setEnabled(false);
					exportLogicalArchitectureItem.setEnabled(false);
					exportPhysicalArchitectureItem.setEnabled(false);
				}else if(currentState == 2){
					exportViolationReportItem.setEnabled(false);
					exportLogicalArchitectureItem.setEnabled(true);
					exportPhysicalArchitectureItem.setEnabled(false);
				}else if(currentState == 3){
					exportViolationReportItem.setEnabled(false);
					exportLogicalArchitectureItem.setEnabled(true);
					exportPhysicalArchitectureItem.setEnabled(false);
				}else if(currentState == 4){
					exportViolationReportItem.setEnabled(true);
					exportLogicalArchitectureItem.setEnabled(true);
					exportPhysicalArchitectureItem.setEnabled(true);
				}
			}
			
		});
	}
}
